<%= javascript_include_tag params[:static_pages] %>
<%= stylesheet_link_tag params[:static_pages] %>

<div class="frame">
		<span class="helper"></span><div class="logo"><img src="/assets/corpsquare.png" /></div>

		<div id="input-location-div">
			<input type="text" id="input-location" placeholder="Where are you going?">
				<button id="submit-location-button" type="button">Search</button>
			<div class="tagline">Traveling? Find out where your coworkers have been to help you figure out where to go.</div>
		</div>
</div>

<script>
  var entriesJson = <%= @expenseEntries.to_s.html_safe %>;
  console.log(entriesJson);
  var venues = [];
  entriesJson['entries'].forEach(function(entry, index, array){
      var venue = {}
      var results = entry['VendorDescription'].split(',');
      venue['name'] = results[0];
      venue['city'] = results[1];
      venue['amount'] = entry['ApprovedAmount'];
      venues.push(venue);
  });

  var expenses = new Array();
  var query = "&query=cronut";
  var baseurl = "https://api.foursquare.com/v2/venues/search?near=New York, NY&oauth_token=EKPQAGKVMLBNB2VCDWREWFSJJHNCRGRQEEEKJTJ10JS5E0WY&v=20140503"
  function myFunction() {
    venues.forEach(function(venue,index)
        { 
          
          query = "&query="+venue.vendorName;
          $.get( baseurl + query, function( data ) {
            venue['latitude'] = data.response.venues[1].location.lat;
            venue['longitude'] = data.response.venues[1].location.lng;
            $( ".inner" ).append( "<p>Name:"+venue.name +"  lat:"+ venue.latitude +"  lng:"+ venue.longitude + "<\p> END");
          });
        });
  }

  $( document ).ready(function() {
      myFunction();
  });
</script>

<h1>Dump Here:</h1>
<div class="inner">
</div>
